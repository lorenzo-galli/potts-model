<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>daje</title>
    <script src="wrapping.js"></script>
    <script src="potts.js"></script>
</head>
<body>
    <p>Ci si prova</p>

    <label for="numColors">Numero di Colori (Q):</label>
    <input
      type="range"
      id="numColors"
      min="2" max="16" step="1"
      value="4"
      oninput="document.getElementById('numColors-value').textContent = this.value"
    />
    <span id="numColors-value">2</span>

    <br>

    <label for="boardLenght">Lunghezza del Board (L):</label>
    <input
      type="range"
      id="boardLenght"
      min="2" max="256" step="1"
      value="64"
      oninput="document.getElementById('boardLenght-value').textContent = this.value"
    />
    <span id="boardLenght-value">2</span>

    <br>

    <label for="temperature">Temperatura (T/Tc):</label>
    <input type="range" id="temperature" min="0" max="100" step="1">
    <span id="temperature-value">50</span>
    <br>
    <input type="number" id="a">
    <input type="number" id="b">
    <button id="trigger">Trigger</button>
    <div id="result"></div>

    <canvas id="canvas"></canvas>

    <script>
      // 1) your existing WASM init happens here â€¦
      Module.onRuntimeInitialized = () => {
        var Q = 5, L = 40;
        let ptr = Module.ccall('init_board','number',['number','number'],[Q,L]);
        const raw   = Module.HEAPU8.subarray(ptr,ptr+L*L);
        const board = Array.from(raw);
        init_board(L, Q, board);
      };

    const triggerButton = document.getElementById('trigger');
    triggerButton.addEventListener('click', () => {
        const Q = document.getElementById('numColors').value;
        const L = document.getElementById('boardLenght').value;
        let ptr = Module.ccall('init_board','number',['number','number'],[Q,L]);
        const raw   = Module.HEAPU8.subarray(ptr,ptr+L*L);
        const board = Array.from(raw);
        init_board(L, Q, board);

      });
    </script>
  </body>
</html>

